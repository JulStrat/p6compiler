<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>P4, P5, P6</title></head>
<body><div style="text-align: center;"><font size="+2"><span style="font-family: Arial;">From P4 to P5</span></font><br style="font-family: Arial;"><span style="font-family: Arial;">compiled, but <span style="font-style: italic;">not</span> copyrighted, by Richard Sprague<br>the portions in </span><span style="font-family: Arial;"><span style="font-family: Courier New;">Courier New </span></span><span style="font-family: Arial;">are from the respective authors</span><br></div><br style="font-family: Arial;"><p><span style="font-family: Arial;">To
keep the Pascal sources for the compiler and interpreter from growing
too large due to commentary that, uh, keeps growing, I have moved the
existing comments (in <span style="font-family: Courier New;">Courier New</span> font), from P4 and P5 here.</span></p><p><span style="font-family: Arial;">The
first set of comments, from the Zurich group, at the beginning of the P4 distribution of
pcom.pas (the compiler) and then pint.pas (the interpreter) are the
following:</span></p><span style="font-family: Courier New;">(*$IFDEF PP*)(*$c+,t-,d+,l-*)(*$ENDIF*)</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;(***********************************************</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Portable Pascal
compiler&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
************************&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Pascal
P4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;
Authors:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Urs
Ammann&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Kesav
Nori&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Christian
Jacobi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;
Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Institut Fuer
Informatik&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Eidg. Technische
Hochschule&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CH-8096
Zuerich&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp; *&nbsp; This code is fully documented in the book&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Pascal
Implementation"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp; *&nbsp;&nbsp; by Steven Pemberton and Martin Daniels&nbsp;&nbsp;&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp; * published by Ellis Horwood, Chichester, UK&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ISBN:
0-13-653-0311&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (also available in
Japanese)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
* Steven Pemberton,
CWI/AA,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp; * Kruislaan 413, 1098 SJ Amsterdam, NL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*
Steven.Pemberton@cwi.nl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp; ***********************************************)</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">(* Ported to Free Pascal and Delphi by Christope Staiesse, 08/2013 *)</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Arial;">[The above is from pcom.pas.]</span><br style="font-family: Arial;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">(*Assembler and interpreter of Pascal code*)</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">(*K. Jensen, N. Wirth, Ch. Jacobi, ETH May 76*)</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">(* Ported to Free Pascal and Delphi by Christope Staiesse, 08/2013 *)</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">program pcode(input,output,prd,prr);</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">(* Note for the implementation.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp; ===========================</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">This interpreter is written for the case where all the fundamental types</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">take one storage unit.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">In an actual implementation, the handling of the sp pointer has to take</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">into account the fact that the types may have lengths different from one:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">in push and pop operations the sp has to be increased and decreased not</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">by 1, but by a number depending on the type concerned.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">However, where the number of units of storage has been computed by the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">compiler, the value must not be corrected, since the lengths of the types</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">involved have already been taken into account.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
*)</span><br style="font-family: Courier New;"><span style="font-family: Arial;">[The above is from pint.pas.]</span><br style="font-family: Arial;"><br style="font-family: Arial;"><span style="font-family: Arial;">[End of P4 authors' comments.]</span><br style="font-family: Arial;"><br style="font-family: Arial;"><span style="font-family: Arial;">Then, in his P5 release, Scott A. Moore added his own comments which I have copied here:</span><br style="font-family: Arial;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;Adaption from P4 to P5 by: </span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; Scott A. Moore</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; samiam@moorecad.com</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; The comments marked with brackets are mine [sam]</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;Note for the implementation.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;===========================</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;This interpreter is written for the case where all the fundamental types</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;take one storage unit.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;In an actual implementation, the handling of the sp pointer has to take</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;into account the fact that the types may have lengths different from one:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;in push and pop operations the sp has to be increased and decreased not</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;by 1, but by a number depending on the type concerned.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;However, where the number of units of storage has been computed by the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;compiler, the value must not be corrected, since the lengths of the types</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;involved have already been taken into account.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;P5 is an extended version of P4 with the following goals:</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;1. The remaining unimplemented functions of Pascal are implemented, so</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; that P5 is no longer a "subset" of full Pascal. This was done because</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; it is no longer necessary to produce a minimum size implementation, and</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; it allows any standard program to be used with P5.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;2. The P5 compiler is brought up to ISO 7185 level 0 standards, both in</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; the language it compiles for, and the language it is implemented in.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;3. The internal storage efficiency is increased. For example, character</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; strings no longer take as much space per character as integers and</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; other data. Sets are placed in their own space so that the minimum</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; stack size not determined by set size.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;4. The remaining limitations and dependencies on the CDC 6000 version are</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; removed. For example, the instruction store no longer is packed 2</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; instructions to a 60 bit word.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;5. General clean up. Longstanding bugs and issues are addressed. Constants</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; that were buried in the source (magic numbers) were made constants. The</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; type 'alpha' (specific to CDC 6000) was replaced with idstr, etc.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;The idea of P5 is to obtain a compiler that is ISO 7185 compliant, can</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;compile itself, can compile any reasonable standard program, and is</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;efficient enough to be used as a normal compiler for some certain uses.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;Finally, it can serve as a starting implementation for native compilers.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;P5 machine instructions added:</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rnd&nbsp;&nbsp;&nbsp; round:&nbsp;&nbsp; expects a float on stack, performs round() and places the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result back on the stack as an integer.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;pck ln pack:&nbsp;&nbsp;&nbsp; Expects a packed array on stack top, followed by the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
starting subscript, then the unpacked array. The parameter</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
contains the length of packed array in elements. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pack(upa, ss, pa) and removes all from stack. The starting</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
subscript is zero based and scaled to the element size.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;upk ln pack:&nbsp;&nbsp;&nbsp; Expects the starting subscript on stack top, followed by</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
the unpacked array, then the packed array. The parameter</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
contains the length of packed array in elements. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
unpack(pa, upa, ss) and removes all from stack. The</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
starting subscript is zero based and scaled to the element</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rgs&nbsp;&nbsp;&nbsp; set rng: Expects a set range specification on stack, with the last</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
value on the top, and the first value next. The two values</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
are replaced with a set with all of the values between and</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
including the first and last values.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;fbv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Validates a file buffer variable. Expects a file address</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
on stack. The buffer is "validated" for lazy I/O, which</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
means that if the associated file is in read mode, the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
delayed read to the buffer variable occurs. The file</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address remains on the stack.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;ipj v l ip jmp: Interprocedure jump. Contains the level of the target</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
procedure, and the label to jump to. The stack is adjusted</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
to remove all nested procedures/functions, then the label</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is unconditionally jumped to.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;cip
p&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Call
indirect procedure/function. The top of stack has the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
address of a mp/address pair pushed by lpa. The dl of the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
current mark is replaced by the mp, and the address</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
replaces the current pc. The mp/ad address is removed from</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stack.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;lpa p l q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Load procedure address. The current mark pointer is loaded</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
onto the stack, followed by the target procedure or</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
function address. This puts enough information on the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
stack to call it with the callers environment.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;lip p q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; load procedure function address. Loads a mark/address pair</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for a procedure or function parameter onto the stack. Used</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
to pass a procedure or function parameter to another</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; procedure or function.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;efb&nbsp;&nbsp;&nbsp; eof:&nbsp;&nbsp;&nbsp;&nbsp; Find eof for binary file. The top of stack is a logical</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
file number. The eof boolean vale replaces it.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;fvb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Expects the length of the file buffer on stack, and the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
file address under that. The buffer is "validated" for</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
lazy I/O, which means that if the associated file is in</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read mode, the delayed read to the buffer variable occurs.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The buffer length is removed only.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;dmp q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subtracts the value from the stack top. Used to dump the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; top of the stack.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;swp
q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Pulls the
second on stack to the top, swapping the top to</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
elements. The size of the second on stack is specified,</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
but the top of the on stack is implied as a pointer.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;tjp q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expects a boolean on stack. Jumps to the address if the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
value is true. Removes the value from the stack.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;P5 machine built in procedures/functions added:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;pag&nbsp;&nbsp;&nbsp; page:&nbsp;&nbsp;&nbsp; Expects a logical file number on stack top. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page().</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rsf&nbsp;&nbsp;&nbsp; reset:&nbsp;&nbsp; Expects a logical file number on stack top. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reset().</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rwf&nbsp;&nbsp;&nbsp; rewrite: Expects a logical file number on stack top. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reset().</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wrb&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a field number on stack top, followed by a boolean</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
to print, then the logical file number. The boolean is</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output as per ISO 7185. </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rgs&nbsp;&nbsp;&nbsp; set rng: Expects a set range specification on stack, with the last</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
value on the top, and the first value next. The two values</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
are replaced with a set with all of the values between and</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
including the first and last values.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wrf&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a fraction number on on stack top, followed by a</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
field number, then a real to print, then the file address.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
The&nbsp; real is output in r:f:f (fraction) format. All but</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
the file are removed from stack.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wbf&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects the length of the type to write, followed by the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
variable address to write from, then the file address to</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
write to. Writes binary store to the file.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wbi&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a file address on stack top, followed by an</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
integer. Writes the integer to the file in binary format.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wbr&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a file address on stack top, followed by a real.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Writes the real to the file in binary format.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wbc&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a file address on stack top, followed by a</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
character. Writes the character to the file in binary</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; format.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;wbb&nbsp;&nbsp;&nbsp; write:&nbsp;&nbsp; Expects a file address on stack top, followed by a</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
boolean. Writes the boolean to the file in binary format.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rbf&nbsp;&nbsp;&nbsp; read:&nbsp;&nbsp;&nbsp; Expects a file address on stack top, followed by the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
length of the type to read, then the variable address to</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
read from. Reads binary store from the file.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rsb&nbsp;&nbsp;&nbsp; reset:&nbsp;&nbsp; Expects a logical file number on stack top. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
reset() and sets the file to binary mode read.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;rwb&nbsp;&nbsp;&nbsp; rewrite: Expects a logical file number on stack top. Performs</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
rewrite() and sets the file to binary mode write.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;gbf&nbsp;&nbsp;&nbsp; get:&nbsp;&nbsp;&nbsp;&nbsp; Get file binary. Expects the length of a file element on</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
stack top, followed by a pointer to the file. The next</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
file element is loaded to the file buffer.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;pbf&nbsp;&nbsp;&nbsp; put:&nbsp;&nbsp;&nbsp;&nbsp; Put file binary. Expects the length of a file element on</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
stack top, followed by a pointer to the file. Writes the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file buffer to thr file.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;Note that the previous version of P4 added some type specified</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;instructions that used to be unified, typeless instructions.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;P5 errors added:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;182 identifier too long</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;183 For index variable must be local to this block</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;184 Interprocedure goto does not reference outter block of destination</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;185 Goto references deeper nested statement</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;186 Label referenced by goto at lesser statement level</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;187 Goto references label in different nested statement</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;188 Label referenced by goto in different nested statement</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;189 Parameter lists of formal and actual parameters not congruous.</span><br style="font-family: Courier New;"><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;P5 instructions modified:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;lca'string'</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;was changed to</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;lca 'string'''</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;That is, lca has a space before the opening quote, no longer pads to the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;right, and represents single quotes with a quote image. pint converts</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;quote images back to single quotes, and pads out strings to their full</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;length.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;In addition, the way files work was extensively modified. Original P5</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;could not represent files as fully expressed variables, such as within an</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;array or record, and were effectively treated as constants. To treat them</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;as true variable accesses, the stacking order of the file in all file</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;subroutines was changed so that the file is on the bottom. This matches</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;the source order of the file in write(f, ...) or read(f, ...). Also, the</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;file operations now leave the file on the stack for the duration of a</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;write or read, then dump them using a specific new instruction "dmp". This</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;allows multiparameter writes and reads to be effectively a chain of single</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;operations using one file reference. Finally, files were tied to the type</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;ending 'a', because files are now full variable references.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;New layout of memory in store:</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp; maxstr -&gt; --------------------- </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| Constants&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cp -&gt; --------------------- </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Dynamic variables |</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; np -&gt; --------------------- </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
| Free space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sp -&gt; --------------------- </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|
Stack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------------------- </span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|
Code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---------------------</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;The constants are loaded upside down from the top of memory. The heap</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;grows down, the stack grows up, and when they cross, it is an overflow</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;error.</span><br style="font-family: Courier New;"><span style="font-family: Courier New;">&nbsp;</span><br style="font-family: Arial;"><span style="font-family: Arial;">[End of Scott A. Moore's comments. For commentary regarding the changes from P5 to P6, click <a href="p5-p6.html">here</a>.]</span><br style="font-family: Arial;"><span style="font-family: Courier New;"></span><br></body></html>